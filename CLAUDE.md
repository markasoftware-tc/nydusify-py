Add type annotations everywhere. Use pipe `|` instead of Union. Use `dict` instead of `Dict`. Similarly for list. You can run the type checker by running `nix-shell -p mypy --command 'mypy src/*.py'`
